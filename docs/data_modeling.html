<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Data modeling | yoda-js</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://yoda-js.github.io/docs/data_modeling"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Data modeling | yoda-js"><meta data-react-helmet="true" name="description" content="Document-oriented databases are built on the assumption that modeling and storing your data as documents is a better fit for common applications. At the storage level however, the design of your data will greatly impact the way your application performs in matter of replication, querying and storage efficiency."><meta data-react-helmet="true" property="og:description" content="Document-oriented databases are built on the assumption that modeling and storing your data as documents is a better fit for common applications. At the storage level however, the design of your data will greatly impact the way your application performs in matter of replication, querying and storage efficiency."><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://yoda-js.github.io/docs/data_modeling"><link data-react-helmet="true" rel="alternate" href="https://yoda-js.github.io/docs/data_modeling" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yoda-js.github.io/docs/data_modeling" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b8352a7a.css">
<link rel="preload" href="/assets/js/runtime~main.614a9804.js" as="script">
<link rel="preload" href="/assets/js/main.818f4ce3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_2n1N">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="yoda-js logo" class="themedImage_3DrH themedImage--light_3LDQ navbar__logo"><img src="/img/logo.svg" alt="yoda-js logo" class="themedImage_3DrH themedImage--dark_7JOh navbar__logo"><b class="navbar__title">yoda-js</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yoda-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_1Kll"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_vfaJ react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_qZGG">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_qZGG">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_232m"><button class="clean-btn backToTopButton_1j3P" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3-6X"><div class="sidebar_2LE7"><nav class="menu thin-scrollbar menu_4_DC menuWithAnnouncementBar_3m4t"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/data_modeling">Data modeling</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/replication">Replication</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/authorization_management">Authorization management</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/api_overview">API overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/packages">Packages</a></li></ul></nav></div></aside><main class="docMainContainer_2Nnm"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_13Dd"><div class="docItemContainer_hVBR"><article><div class="tocCollapsible_2JyW theme-doc-toc-mobile tocMobile_3APh"><button type="button" class="clean-btn tocCollapsibleButton_1Sb0">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Data modeling</h1></header><p>Document-oriented databases are built on the assumption that <a href="https://docs.couchdb.org/en/latest/intro/why.html#a-different-way-to-model-your-data" target="_blank" rel="noopener noreferrer">modeling and storing your data as documents</a> is a better fit for common applications. At the storage level however, the design of your data will greatly impact the way your application performs in matter of replication, querying and storage efficiency.</p><p>This article explains the choices made upon data structure in Yoda, to answer these challenges.</p><p>To make it clear, there are two types of documents in a Yoda instance : items and their attachments.</p><p>The following chart summarizes Yoda&#x27;s storage architecture. When you insert a document locally into Yoda, it is converted into an event which is inserted into a time series and aggregated into a graph. Additionally for attachments, the files binary data are saved in an appropriate storage. Conversely, when Yoda receives an event from the network, it will be stored in the corresponding graph and time series, and will then transformed into a valid document to be queried later.</p><div class="mermaid">flowchart TB
	RE[Replication] &lt;--&gt; ST
	subgraph ST[&quot;Channel(s)&quot;]
		direction TB
		IG[(Items graph)] -.- IE[(Items events)] -.- IV[(Materialized&lt;br&gt;views)]
		AG[(Attachments&lt;br&gt;graph)] -.- AE[(Attachments&lt;br&gt;events)] -.- AV[(&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;files&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;)]
	end
	ST &lt;--&gt; EQ[Editing / querying]
  %%
  classDef layer fill: #ffffde, stroke: #aaaa33, stroke-width: 1px;
  classDef title position: relative, top: -0.35em;
  class RE,EQ layer;
  class ST title;
</div><p>The structure of a Yoda item is the following. and will be further discussed in the article:</p><div class="codeBlockContainer_1P4A"><div class="codeBlockContent_B5a2 ts"><pre tabindex="0" class="prism-code language-ts codeBlock_346R thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_2b4B"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Item</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token class-name constant" style="color:rgb(130, 170, 255)">T</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    _meta</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _channel</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _rev</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _createdAt</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _updatedAt</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _deleted</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _deletedAt</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _purged</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _purgedAt</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Date</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    _data</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    _attachments</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> _id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> _filename</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> _contentType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> _length</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3A_5 clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="channels"></a>Channels<a class="hash-link" href="#channels" title="Direct link to heading">#</a></h2><p>A channel in Yoda is an abstract representation that brings together:</p><ul><li><em>A logical storage unit</em>. It is a cohesive group of resources used to store a set of related documents together with their corresponding events graphs. Depending on the execution context, these resources could be a combination of any type of compatible storage : one or more databases, a folder on the filesystem, an S3 bucket...</li><li><em>A security layer</em>. The authentication strategy is evaluated at the channel level: a user is explicitly granted read only or full access to a channel.</li><li><em>A bi-directional communication channel</em>. Replication operations always run against a specific channel. A replication message or request is published to or received from a specific channel.</li></ul><p>A Yoda instance can host any number of channels.</p><p>The special <code>_local</code> channel is used for local only data. Its content will never be synchronized outside the instance.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="documents-events"></a>Documents events<a class="hash-link" href="#documents-events" title="Direct link to heading">#</a></h2><p>Yoda adopts the <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing" target="_blank" rel="noopener noreferrer">immutable history / event sourcing</a> pattern to store documents.</p><p>When you publish a document to a Yoda instance, a unique <code>_id</code> identifier is generated for the document. Additionally for items updates, Yoda compares the provided item with its previous version (if any) and only retains the difference in the event&#x27;s content. A unique <code>_rev</code> identifier is generated for this new revision of the item.</p><p>The system stores this document as an event in the <code>_primary</code> index, under the appropriate <code>_itm_events</code> or <code>_att_events</code> partition for items or attachments respectively, with a compound sort key made of <code>_rev</code> and <code>_id</code> for items and <code>_id</code> as a sort key for attachments.</p><p>Additionally the appropriate graph is updated, <code>_itm_graph</code> or <code>_att_graph</code> for items or attachments respectively, to handle attachments synchronization across devices.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="materialized-views"></a>Materialized views<a class="hash-link" href="#materialized-views" title="Direct link to heading">#</a></h2><p>Yoda stores the submitted documents with storage and replication efficiency in mind. However, the event sourcing storage pattern is not the best format for reading efficiency and can have a negative effect on queries.</p><p>To support efficient querying Yoda maintains local views of the items. Querying and data extraction are executed against these <a href="https://docs.microsoft.com/en-us/azure/data-explorer/kusto/management/materialized-views/materialized-view-overview" target="_blank" rel="noopener noreferrer">materialized views</a> or there eventual indexes.</p><p>The items revisions are materialized under the <code>_items</code> partition key, with a compound sort key made of <code>_id</code> and <code>_rev</code>.</p><p>These representations of items are always computed locally. In case of inconsistency they can be discarded and rebuild from the events sources.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="secondary-indexes"></a>Secondary indexes<a class="hash-link" href="#secondary-indexes" title="Direct link to heading">#</a></h2><p>Secondary indexes, compound indexes (partition keys (hash) and sort keys (range)), indexes overloading are key features in NoSQL data modeling.</p><p>In more advanced NoSQL databases that handle indexes (indexeddb, dynamodb, ...), the indexing capabilities of the underlying database will be used.</p><p>In key-value databases (like leveldb), there is no other index than the storage key. In such contexts Yoda emulates indexes by composing storage keys : the index name is prefixed to the partition key. If no index name is provided, the <code>_primary</code> index will be used by default. The partition key and sort key are composed into a storage key by using a forward slash <code>/</code> character.</p><p>Partition keys and sort keys can be usefully decomposed further. By convention, we recommend to use the hash <code>#</code> character and encourage you to reserve this character to this specific usage in your keys. You are free to use any other character though (except the forward slash <code>/</code> as stated above).</p><p>Indexes key schemas (index name, partition key property name and sort key property name) are declared during the instance initialization. When the materialized views are calculated, the indexes are updated according to the properties names:</p><ul><li>if a matching partition key / sort key pair is found, the index entry will be created or updated for this item</li><li>otherwise the item will be skipped on that particular index (also called a sparse index)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_sQNW" id="automatic-dates"></a>Automatic dates<a class="hash-link" href="#automatic-dates" title="Direct link to heading">#</a></h3><p>Since time is a key component of a document identifer, Yoda also adds useful date properties automatically in the <code>_meta</code> properties of your materialized views:</p><ul><li><code>_createdAt</code>: creation date of the document</li><li><code>_updatedAt</code>: optional, last update of the document or undefined</li><li><code>_deletedAt</code>: optional, document deletion date or undefined</li><li><code>_purgedAt</code>: optional, document purge date or undefined</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="attachments"></a>Attachments<a class="hash-link" href="#attachments" title="Direct link to heading">#</a></h2><p>It is generally admitted that storing files binaries in databases is a bad practice. Yoda uses a dedicated adapter to store an item&#x27;s attachments binary data in a more appropriate storage (for example, the filesystem on the server, an S3 bucket on AWS, or a separate indexeddb in the browser to ensure a broader browser compatibility).</p><p>Anyway, an attachment cannot exist independently of an item. It is always attached to a specific item&#x27;s revision in the database, and can only be retrieved and manipulated through the item it is attached to.</p><p>When you attach a file to an item :</p><ul><li>the file&#x27;s binary data is stored in the attachment storage through the dedicated adapter. The attachment storage adapter takes care of choosing the best format for storing the attachment (blob, buffer, ...).</li><li>the file&#x27;s metadata is referenced into the corresponding item in its <code>_attachments</code> array. These meta properties are <code>_id</code>, <code>_filename</code>, <code>_contentType</code> (MIME type) and <code>_length</code> (bytes).</li><li>an event is generated and sorted under its <code>_id</code> into the attachments series <code>_att_events</code> (attachments are binary data and are not diffed or versioned, so they don&#x27;t take an <code>_rev</code>property).</li><li>The attachments graph <code>_att_graph</code> is updated to handle attachments synchronization across devices.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="universally-unique-lexicographically-sortable-identifiers-ulid"></a>Universally unique Lexicographically sortable IDentifiers (ULID)<a class="hash-link" href="#universally-unique-lexicographically-sortable-identifiers-ulid" title="Direct link to heading">#</a></h2><p>In Yoda, identifiers in general, and the <code>_id</code>and <code>_rev</code> properties in particular, are critical. Thus they are fully managed by the system.</p><p>To ensure consistency across distributed endpoints, Yoda relies on Universally Unique Lexicographically sortable IDentifiers (<a href="https://github.com/ulid/spec" target="_blank" rel="noopener noreferrer">ULID</a>). This feature guarantees that documents, and items revisions, are conflict free, even among distributed endpoints. In Yoda, the latest known ULID always wins.</p><p>In order to protect the system from intentional or unintentional ULID stream corruption, Yoda enforces the following policy.<br>
Locally, trying to post a revision to an item in the past (with a revision ULID prior to the current revision ULID) will throw an error. In the same way, editing with a revision ULID in the future (greater than the current time on the local instance) will throw an error.<br>
During the replication process, trying to replicate changes in the past (with a revision ULID lower than the current item ULID) or in the future (greater than the current time on the instance) will throw an error.<br>
If you receive such errors on a client, it most probably indicates that its internal clock is not on time. If a client&#x27;s clock is late, it will experience a delay before receiving the latest changes, and its own messages will have a greater risk of being ignored in favour of more recent revisions from other instances. If a client&#x27;s clock is early, it will experience a delay before being able to submit its changes.</p><p>To mitigate clock de-synchronization, Yoda implements a <a href="https://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/implement-retries-exponential-backoff" target="_blank" rel="noopener noreferrer">retry strategy with exponential back-off</a> in case of synchronization errors. This gives a chance to the client to catch the time window and to synchronize successfully with a delay.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="javascript-serialization-and-storage-efficiency"></a>Javascript serialization and storage efficiency<a class="hash-link" href="#javascript-serialization-and-storage-efficiency" title="Direct link to heading">#</a></h2><p>Yoda do not store documents as JSON. You may yourself find that sometimes you need to store JavaScript dates, sets or maps... For that reason Yoda stores compressed stringified javascript objects. With Yoda, you can publish any fully qualified javascript object as a document. Yoda handles for you the object diffing, serialization and compression into events.</p><p>Compressed strings has been favored over alternative binary formats because they have proven to be the most <a href="https://www.lucidchart.com/techblog/2019/12/06/json-compression-alternative-binary-formats-and-compression-methods/" target="_blank" rel="noopener noreferrer">efficient way to store data</a> in Javascript environments.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="reserved-words"></a>Reserved words<a class="hash-link" href="#reserved-words" title="Direct link to heading">#</a></h2><p>As a general rule:</p><ul><li>your properties and values should not start with an underscore <code>_</code> as this character is used to indicate reserved words in Yoda. Reserved words may be introduced as needed by plugins or future releases.</li><li>Your indexing values can not contain forward slashes <code>/</code> as this character is used to distinguish partition key values from sort key values in key-value databases.</li><li>By convention, we recommend to use the <code>#</code> character and encourage you to reserve this character to further decompose your partition and sort keys. You are free to use any other character though (except the forward slash <code>/</code>as stated above).</li></ul><p>Yoda reserves special words:</p><ul><li>channels:<ul><li><code>_local</code> (local documents channel ; they will never be replicated)</li></ul></li><li>index names:<ul><li><code>_primary</code> (primary index in key-value databases)</li></ul></li><li>primary index partition key values:<ul><li><code>_itm_events</code> (events)</li><li><code>_att_events</code> (events)</li><li><code>_itm_graph</code> (events graph)</li><li><code>_att_graph</code> (attachments graph)</li></ul></li><li>items property names:<ul><li><code>_meta</code></li><li><code>_data</code></li><li><code>_attachments</code></li><li><code>_channel</code></li><li><code>_id</code></li><li><code>_rev</code></li><li><code>_createdAt</code></li><li><code>_updatedAt</code></li><li><code>_deleted</code></li><li><code>_deletedAt</code></li><li><code>_purged</code></li><li><code>_purgedAt</code></li><li><code>_filename</code></li><li><code>_contentType</code></li><li><code>_length</code></li></ul></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Architecture</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/replication"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Replication Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_17BG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#channels" class="table-of-contents__link">Channels</a></li><li><a href="#documents-events" class="table-of-contents__link">Documents events</a></li><li><a href="#materialized-views" class="table-of-contents__link">Materialized views</a></li><li><a href="#secondary-indexes" class="table-of-contents__link">Secondary indexes</a><ul><li><a href="#automatic-dates" class="table-of-contents__link">Automatic dates</a></li></ul></li><li><a href="#attachments" class="table-of-contents__link">Attachments</a></li><li><a href="#universally-unique-lexicographically-sortable-identifiers-ulid" class="table-of-contents__link">Universally unique Lexicographically sortable IDentifiers (ULID)</a></li><li><a href="#javascript-serialization-and-storage-efficiency" class="table-of-contents__link">Javascript serialization and storage efficiency</a></li><li><a href="#reserved-words" class="table-of-contents__link">Reserved words</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright"><a href="/license">About yoda-js documentation</a><br>Copyright Â© 2021 yoda-js</div></div></div></footer></div>
<script src="/assets/js/runtime~main.614a9804.js"></script>
<script src="/assets/js/main.818f4ce3.js"></script>
</body>
</html>