<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">API overview | yoda-js</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://yoda-js.github.io/docs/api_overview"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="API overview | yoda-js"><meta data-react-helmet="true" name="description" content="Event sourcing and events graphs deal with storage and synchronization."><meta data-react-helmet="true" property="og:description" content="Event sourcing and events graphs deal with storage and synchronization."><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://yoda-js.github.io/docs/api_overview"><link data-react-helmet="true" rel="alternate" href="https://yoda-js.github.io/docs/api_overview" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yoda-js.github.io/docs/api_overview" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b8352a7a.css">
<link rel="preload" href="/assets/js/runtime~main.614a9804.js" as="script">
<link rel="preload" href="/assets/js/main.818f4ce3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_2n1N">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="yoda-js logo" class="themedImage_3DrH themedImage--light_3LDQ navbar__logo"><img src="/img/logo.svg" alt="yoda-js logo" class="themedImage_3DrH themedImage--dark_7JOh navbar__logo"><b class="navbar__title">yoda-js</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yoda-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_1Kll"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_vfaJ react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_qZGG">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_qZGG">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_232m"><button class="clean-btn backToTopButton_1j3P" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3-6X"><div class="sidebar_2LE7"><nav class="menu thin-scrollbar menu_4_DC menuWithAnnouncementBar_3m4t"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/data_modeling">Data modeling</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/replication">Replication</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/authorization_management">Authorization management</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/api_overview">API overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/packages">Packages</a></li></ul></nav></div></aside><main class="docMainContainer_2Nnm"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_13Dd"><div class="docItemContainer_hVBR"><article><div class="tocCollapsible_2JyW theme-doc-toc-mobile tocMobile_3APh"><button type="button" class="clean-btn tocCollapsibleButton_1Sb0">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>API overview</h1></header><p>Event sourcing and events graphs deal with storage and synchronization.</p><p>But as developers, we mostly care for the ability to edit, query and show our data in interesting and useful ways. We want to slice and dice and access our data in many different patterns. What is needed is a way to edit, filter, organize and report on data in our instance.</p><p>By default, Yoda provides a small and familiar asynchronous API.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="utility"></a>Utility<a class="hash-link" href="#utility" title="Direct link to heading">#</a></h2><ul><li><strong>yoda()</strong>: The main entry point for creating a new yoda instance.</li><li><strong>db.info()</strong>: retrieves the instance current status, configuration and supported features.</li><li><strong>db.open()</strong>: opens the underlying resources.</li><li><strong>db.close()</strong>: closes the underlying resources.</li><li><strong>db.isOpen()</strong>: will return true only when the state of the instance is &quot;open&quot;, it can be useful for determining if read and write operations are permissible.</li><li><strong>db.isClosed()</strong>: will return true only when the state of the instance is &quot;closing&quot; or &quot;closed&quot;, it can be useful for determining if read and write operations are permissible.</li><li><strong>db.compact()</strong>: purges outdated data from the underlying stores to optimize storage and querying efficiency.</li><li><strong>db.rebuild()</strong>: rebuilds indexed views and/or graphs from the events series from scratch.</li><li><strong>db.plugin()</strong>: registers a new plugin.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="editing"></a>Editing<a class="hash-link" href="#editing" title="Direct link to heading">#</a></h2><ul><li><strong>db.put()</strong>: creates or updates a document or a batch of documents.</li><li><strong>db.putAttachment()</strong>: attach a file or a batch of files to documents.</li><li><strong>db.del()</strong>: soft deletes a document or a batch of documents.</li><li><strong>db.delAttachment()</strong>: detach a file or a batch of files from documents. When a file is detached, it is not purged from the underlying store but removed from the latest item&#x27;s revision <code>_attachments</code> array.</li><li><strong>db.purge()</strong>: hard deletes a document or a batch of documents from the underlying storage. The corresponding attachments are purged too.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="querying"></a>Querying<a class="hash-link" href="#querying" title="Direct link to heading">#</a></h2><ul><li><strong>db.get()</strong>: primary method to retrieve a document or a batch of documents directly, by providing their keys.</li><li><strong>db.getAttachment()</strong>: retrieves the binary data of one or multiple attached files, by providing their attached documents keys and optionally their own keys.</li><li><strong>db.query()</strong>: returns all documents with the provided partition key value. Optionally, you can provide a sort key attribute and use a comparison operator to refine the search results.</li><li><strong>db.scan()</strong>: returns one or more items and item attributes by accessing every item in a table or a secondary index. This access method may grow arbitrarily long depending on the number of documents to scan and should be avoided, especially on the server side.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="replication"></a>Replication<a class="hash-link" href="#replication" title="Direct link to heading">#</a></h2><ul><li><strong>db.putEndpoint()</strong>: creates or updates one or more replication endpoints configurations.</li><li><strong>db.getEndpoint()</strong>: gets of one or more replication endpoints configurations.</li><li><strong>db.delEndpoint()</strong>: deletes one or more replication endpoints configurations.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_sQNW" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><p>Yoda is an <a href="https://github.com/sindresorhus/emittery" target="_blank" rel="noopener noreferrer">emittery</a> event emitter.</p><p>It emits two events for every method available on the API.</p><table><thead><tr><th>Method</th><th>Events</th><th>Arguments</th></tr></thead><tbody><tr><td>yoda</td><td>beforeYoda, afterYoda</td><td>To be defined</td></tr><tr><td>info</td><td>beforeInfo, afterInfo</td><td>To be defined</td></tr><tr><td>open</td><td>beforeOpen, afterOpen</td><td>To be defined</td></tr><tr><td>close</td><td>beforeClose, afterClose</td><td>To be defined</td></tr><tr><td>isOpen</td><td>beforeIsOpen, afterIsOpen</td><td>To be defined</td></tr><tr><td>isClosed</td><td>beforeIsClosed, afterIsClosed</td><td>To be defined</td></tr><tr><td>compact</td><td>beforeCompact, afterCompact</td><td>To be defined</td></tr><tr><td>rebuild</td><td>beforeRebuild, afterRebuild</td><td>To be defined</td></tr><tr><td>plugin</td><td>beforePlugin, afterPlugin</td><td>To be defined</td></tr><tr><td>put</td><td>beforePut, afterPut</td><td>To be defined</td></tr><tr><td>putAttachment</td><td>beforePutAttachment, afterPutAttachment</td><td>To be defined</td></tr><tr><td>del</td><td>beforeDel, afterDel</td><td>To be defined</td></tr><tr><td>delAttachment</td><td>beforeDelAttachment, afterDelAttachment</td><td>To be defined</td></tr><tr><td>purge</td><td>beforePurge, afterPurge</td><td>To be defined</td></tr><tr><td>get</td><td>beforeGet, afterGet</td><td>To be defined</td></tr><tr><td>getAttachment</td><td>beforeGetAttachment, afterGetAttachment</td><td>To be defined</td></tr><tr><td>query</td><td>beforeQuery, afterQuery</td><td>To be defined</td></tr><tr><td>scan</td><td>beforeScan, afterScan</td><td>To be defined</td></tr><tr><td>putEndpoint</td><td>beforePutEndpoint, afterPutEndpoint</td><td>To be defined</td></tr><tr><td>getEndpoint</td><td>beforeGetEndpoint, afterGetEndpoint</td><td>To be defined</td></tr><tr><td>delEndpoint</td><td>beforeDelEndpoint, afterDelEndpoint</td><td>To be defined</td></tr></tbody></table><p>It emits events for every message sent or received from the replication service:</p><table><thead><tr><th>Event</th><th>description</th><th>Arguments</th></tr></thead><tbody><tr><td>beforeMessageSent</td><td>emitted before message publication</td><td>To be defined</td></tr><tr><td>afterMessageSent</td><td>emitted after message publication</td><td>To be defined</td></tr><tr><td>afterMessageReceived</td><td>emitted after message reception</td><td>To be defined</td></tr></tbody></table><p>These events can be used as hooking-points for middleware or consumed by your application as needed (for UI data binding for example).</p><p>You can use all the API of <a href="https://github.com/sindresorhus/emittery" target="_blank" rel="noopener noreferrer">emittery</a> to extend this behavior (on, off, onAny, offAny, etc.).</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/authorization_management"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Authorization management</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/packages"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Packages Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_17BG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#utility" class="table-of-contents__link">Utility</a></li><li><a href="#editing" class="table-of-contents__link">Editing</a></li><li><a href="#querying" class="table-of-contents__link">Querying</a></li><li><a href="#replication" class="table-of-contents__link">Replication</a></li><li><a href="#events" class="table-of-contents__link">Events</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright"><a href="/license">About yoda-js documentation</a><br>Copyright Â© 2021 yoda-js</div></div></div></footer></div>
<script src="/assets/js/runtime~main.614a9804.js"></script>
<script src="/assets/js/main.818f4ce3.js"></script>
</body>
</html>